const TelegramBot = require('node-telegram-bot-api');
require('dotenv').config();

// –¢–æ–∫–µ–Ω –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –±–æ—Ç–∞
const CLIENT_BOT_TOKEN = process.env.TELEGRAM_CLIENT_BOT_TOKEN || '7062627252:AAHhocIpcumSYXFne2Qjrf6ZZJhmHdmdEJI';

// –¢–µ—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º —è–∑—ã–∫–µ
const kazakhMessages = [
  '–°”ô–ª–µ–º! –ù–µ—Å–∏–µ –∞–ª—É“ì–∞ –∫”©–º–µ–∫ –∫–µ—Ä–µ–∫',
  '–ú–µ–Ω—ñ“£ –Ω–µ—Å–∏–µ —Ç–∞—Ä–∏—Ö—ã–º –Ω–∞—à–∞—Ä, –∫”©–º–µ–∫—Ç–µ—Å–µ –∞–ª–∞—Å—ã–∑ –±–∞?',
  '“ö–∞–Ω–¥–∞–π “õ“±–∂–∞—Ç—Ç–∞—Ä “õ–∞–∂–µ—Ç?',
  '–ú–∏–Ω–∏–º–∞–ª–¥—ã —Å–æ–º–∞ “õ–∞–Ω—à–∞?',
  '“ö–∞–Ω—à–∞ —É–∞“õ—ã—Ç—Ç–∞ –º–∞“õ“±–ª–¥–∞—É –∞–ª–∞–º—ã–Ω?'
];

async function testKazakhSupport() {
  console.log('üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–∞–∑–∞—Ö—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –±–æ—Ç–µ...\n');
  
  try {
    const bot = new TelegramBot(CLIENT_BOT_TOKEN, { polling: false });
    
    // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ
    const botInfo = await bot.getMe();
    console.log(`‚úÖ –ë–æ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω: @${botInfo.username}`);
    console.log(`üìù –ò–º—è –±–æ—Ç–∞: ${botInfo.first_name}`);
    
    // –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–∞–∑–∞—Ö—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
    console.log(`\nüî§ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–∞–∑–∞—Ö—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤:`);
    
    for (let i = 0; i < kazakhMessages.length; i++) {
      const message = kazakhMessages[i];
      console.log(`\nüì§ –°–æ–æ–±—â–µ–Ω–∏–µ ${i + 1}: "${message}"`);
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞–∑–∞—Ö—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã
      const hasKazakhChars = /[”ô“ì“õ“£”©“±“Ø—ñ“ª]/.test(message);
      if (hasKazakhChars) {
        console.log(`   ‚úÖ –ö–∞–∑–∞—Ö—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è`);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
        const kazakhChars = message.match(/[”ô“ì“õ“£”©“±“Ø—ñ“ª]/g);
        if (kazakhChars) {
          console.log(`   üî§ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫–∞–∑–∞—Ö—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã: ${kazakhChars.join(', ')}`);
        }
      } else {
        console.log(`   ‚ÑπÔ∏è  –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ`);
      }
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–ª–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏—è
      console.log(`   üìè –î–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è: ${message.length} —Å–∏–º–≤–æ–ª–æ–≤`);
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫—É
      const bytes = Buffer.from(message, 'utf8');
      console.log(`   üî¢ –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö: ${bytes.length}`);
    }
    
    console.log(`\nüìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:`);
    console.log(`‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω`);
    console.log(`‚úÖ –ö–∞–∑–∞—Ö—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è`);
    console.log(`‚úÖ UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ`);
    console.log(`‚úÖ –î–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ`);
    
    console.log(`\nüéâ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!`);
    console.log(`üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:`);
    console.log(`‚Ä¢ –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –∫–∞–∑–∞—Ö—Å–∫–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏`);
    console.log(`‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–∏—Å–∞—Ç—å –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º —è–∑—ã–∫–µ`);
    console.log(`‚Ä¢ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —è–∑—ã–∫–∞ –≤–≤–æ–¥–∞`);
    console.log(`‚Ä¢ –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (–∫–∞–∫ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å)`);
    
    return true;
    
  } catch (error) {
    console.log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:`, error.message);
    return false;
  }
}

// –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç
testKazakhSupport().catch(console.error);
